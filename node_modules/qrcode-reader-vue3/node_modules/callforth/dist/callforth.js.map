{"version":3,"file":"callforth.js","sources":["../src/callforth.js"],"sourcesContent":["\nexport const eventOn = (eventTarget, successEvent, errorEvent = \"error\") => {\n  let $resolve, $reject\n\n  const promise = new Promise((resolve, reject) => {\n    $resolve = resolve\n    $reject = reject\n  })\n\n  eventTarget.addEventListener(successEvent, $resolve)\n  eventTarget.addEventListener(errorEvent, $reject)\n\n  promise.finally(() => {\n    eventTarget.removeEventListener(successEvent, $resolve)\n    eventTarget.removeEventListener(errorEvent, $reject)\n  })\n\n  return promise\n}\n\nexport const timeout = milliseconds => {\n  return new Promise(\n    resolve => setTimeout(resolve, milliseconds)\n  )\n}\n\nexport const polling = async (predicate, options = {}) => {\n  const { maxTries = 10, interval = 10 } = options\n\n  if (maxTries <= 0) {\n    // reject\n    throw undefined\n  } else if (predicate()) {\n    // resolve\n    return undefined\n  } else {\n    await timeout(interval)\n    await polling(predicate, { maxTries: maxTries-1, interval })\n  }\n}"],"names":["eventOn","timeout","milliseconds","Promise","resolve","setTimeout","eventTarget","successEvent","errorEvent","$resolve","$reject","promise","reject","addEventListener","removeEventListener","polling","predicate","options","maxTries","interval","undefined"],"mappings":"AACaA,IAmBAC,EAAU,SAAAC,GACrB,WAAWC,QACT,SAAAC,UAAWC,WAAWD,EAASF,sBArBZ,SAACI,EAAaC,EAAcC,GACjD,IAAIC,EAAUC,WADmCF,IAAAA,EAAa,SAG9D,IAAMG,EAAU,IAAIR,QAAQ,SAACC,EAASQ,GACpCH,EAAWL,EACXM,EAAUE,IAWZ,OARAN,EAAYO,iBAAiBN,EAAcE,GAC3CH,EAAYO,iBAAiBL,EAAYE,GAEzCC,UAAgB,WACdL,EAAYQ,oBAAoBP,EAAcE,GAC9CH,EAAYQ,oBAAoBN,EAAYE,KAGvCC,4BASII,EAAiBC,EAAWC,YAAAA,IAAAA,EAAU,cACRA,EAAjCC,SAAAA,aAAW,OAAsBD,EAAlBE,SAAAA,aAAW,0CAE9BD,GAAY,EAEd,WAAME,SACGJ,SAET,kBAEMf,EAAQkB,2CACRJ,EAAQC,EAAW,CAAEE,SAAUA,EAAS,EAAGC,SAAAA,8BAXjC"}