"use strict";(self["webpackChunkquasarteste2"]=self["webpackChunkquasarteste2"]||[]).push([[112],{8112:(a,l,e)=>{e.r(l),e.d(l,{default:()=>G});var o=e(3673),t=e(2323);(0,o.dD)("data-v-ae90018a");const r={class:"q-pa-md",style:{"max-width":"400px"}},s=(0,o._)("h5",{class:"q-mt-sm"},"Saída de veículo",-1),c={class:"row q-col-gutter-xs"},d={class:"col-12"},n={class:"row row q-col-gutter-xs"},i={class:"col-6"},u={class:"col-6"},_={key:0},m={class:"row row q-col-gutter-xs"},p={class:"col-6"},g={class:"col-6"},v={class:"row q-col-gutter-xs"},f={class:"col-12"},V={class:"row row q-col-gutter-xs"},w={class:"col-12"},b={class:"row q-col-gutter-xs"},h={class:"col-4 col-md-4"},x={class:"col-4 col-md-4"},y={class:"col-4 col-md-4"},q={class:"row row q-col-gutter-xs"},W={class:"col-6 col-md-6"},k={class:"col-6 col-md-6"},U={class:"row q-col-gutter-xs"},D={class:"col-6"},C={class:"col-6"},Z={key:0,class:"row q-col-gutter-xs"},S={class:"col-6"},M={class:"col-6"},R={class:"col-6 col-md-6"},X={class:"col-6 col-md-6"};function H(a,l,e,H,Q,I){const E=(0,o.up)("q-input"),F=(0,o.up)("q-btn"),j=(0,o.up)("q-expansion-item"),P=(0,o.up)("q-list"),T=(0,o.up)("q-form");return(0,o.wg)(),(0,o.iD)("div",r,[s,(0,o.Wm)(T,{class:"q-gutter-md",onSubmit:H.update,onReset:H.onReset},{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o._)("div",d,[(0,o.Wm)(E,{class:"font1",modelValue:H.car.now_timestamp,"onUpdate:modelValue":l[0]||(l[0]=a=>H.car.now_timestamp=a),filled:"",label:"Hora e data atual",readonly:""},null,8,["modelValue"])])]),(0,o._)("div",n,[(0,o._)("div",i,[(0,o.Wm)(E,{mask:"XXXXXXX",class:"font2",modelValue:H.car.placa,"onUpdate:modelValue":l[1]||(l[1]=a=>H.car.placa=a),filled:"",label:"Placa",autofocus:""},null,8,["modelValue"])]),(0,o._)("div",u,[(0,o.Wm)(F,{_class:"q-mt-sm",icon:"my_location",onClick:H.carsearch,type:"button",color:"primary",label:"Procurar"},null,8,["onClick"])])]),H.carro_encontrado?((0,o.wg)(),(0,o.iD)("div",_,[(0,o._)("div",m,[(0,o._)("div",p,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.modelo,"onUpdate:modelValue":l[2]||(l[2]=a=>H.car.modelo=a),filled:"",label:"Modelo"},null,8,["modelValue"])]),(0,o._)("div",g,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.cor,"onUpdate:modelValue":l[3]||(l[3]=a=>H.car.cor=a),filled:"",label:"Cor"},null,8,["modelValue"])])]),(0,o.Wm)(P,{bordered:"",class:"rounded-borders"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{"expand-separator":"",label:"Detalhes"},{default:(0,o.w5)((()=>[(0,o._)("div",v,[(0,o._)("div",f,[(0,o.Wm)(E,{class:"font1",modelValue:H.car.in_timestamp,"onUpdate:modelValue":l[4]||(l[4]=a=>H.car.in_timestamp=a),filled:"",label:"Entrada",readonly:""},null,8,["modelValue"])])]),(0,o._)("div",V,[(0,o._)("div",w,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.obs,"onUpdate:modelValue":l[5]||(l[5]=a=>H.car.obs=a),filled:"",label:"Obs"},null,8,["modelValue"])])]),(0,o._)("div",b,[(0,o._)("div",h,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.n_diarias,"onUpdate:modelValue":l[6]||(l[6]=a=>H.car.n_diarias=a),filled:"",label:"Diárias"},null,8,["modelValue"])]),(0,o._)("div",x,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.valor_diaria,"onUpdate:modelValue":l[7]||(l[7]=a=>H.car.valor_diaria=a),filled:"",label:"Valor da diária","input-class":"text-right"},null,8,["modelValue"])]),(0,o._)("div",y,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.valor_total,"onUpdate:modelValue":l[8]||(l[8]=a=>H.car.valor_total=a),filled:"",type:"text",label:"Valor total","input-class":"text-right"},null,8,["modelValue"])])]),(0,o._)("div",q,[(0,o._)("div",W,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.valor_pago,"onUpdate:modelValue":l[9]||(l[9]=a=>H.car.valor_pago=a),filled:"",type:"text",label:"Valor pago","input-class":"text-right"},null,8,["modelValue"])]),(0,o._)("div",k,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.valor_troco,"onUpdate:modelValue":l[10]||(l[10]=a=>H.car.valor_troco=a),filled:"",type:"text",label:"Troco","input-class":"text-right"},null,8,["modelValue"])])])])),_:1})])),_:1}),(0,o._)("div",U,[(0,o._)("div",D,[(0,o.Wm)(E,{class:"font1",modelValue:H.car.pago_ate,"onUpdate:modelValue":l[11]||(l[11]=a=>H.car.pago_ate=a),filled:"",label:"Pago até",readonly:""},null,8,["modelValue"])]),(0,o._)("div",C,[H.car.n_diarias_falta_pagar>0?((0,o.wg)(),(0,o.j4)(E,{key:0,class:"font1",modelValue:H.car.n_diarias_falta_pagar,"onUpdate:modelValue":l[12]||(l[12]=a=>H.car.n_diarias_falta_pagar=a),filled:"",label:"Diarias a pagar",readonly:""},null,8,["modelValue"])):(0,o.kq)("",!0),H.car.n_diarias_falta_pagar<=0?((0,o.wg)(),(0,o.j4)(E,{key:1,class:"font1",filled:"",label:"Status",modelValue:H.car.status,"onUpdate:modelValue":l[13]||(l[13]=a=>H.car.status=a),readonly:""},null,8,["modelValue"])):(0,o.kq)("",!0)]),H.car.n_diarias_falta_pagar>0?((0,o.wg)(),(0,o.iD)("div",Z,[(0,o._)("div",S,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.valor_diaria_falta_pagar,"onUpdate:modelValue":l[14]||(l[14]=a=>H.car.valor_diaria_falta_pagar=a),filled:"",label:"Valor da diária","input-class":"text-right"},null,8,["modelValue"])]),(0,o._)("div",M,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.valor_total_falta_pagar,"onUpdate:modelValue":l[15]||(l[15]=a=>H.car.valor_total_falta_pagar=a),filled:"",type:"text",label:"Valor total a pagar","input-class":"text-right"},null,8,["modelValue"])]),(0,o._)("div",R,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.valor_pago_falta_pagar,"onUpdate:modelValue":l[16]||(l[16]=a=>H.car.valor_pago_falta_pagar=a),filled:"",type:"text",label:"Valor pago","input-class":"text-right"},null,8,["modelValue"])]),(0,o._)("div",X,[(0,o.Wm)(E,{class:"font2",modelValue:H.car.valor_troco_falta_pagar,"onUpdate:modelValue":l[17]||(l[17]=a=>H.car.valor_troco_falta_pagar=a),filled:"",type:"text",label:"Troco","input-class":"text-right"},null,8,["modelValue"])])])):(0,o.kq)("",!0)])])):(0,o.kq)("",!0),(0,o._)("div",null,[(0,o.Uk)((0,t.zw)(H.car.placa.length)+" ",1),H.car.placa.length>0&&(H.car.valor_total_falta_pagar<=0||H.car.valor_troco_falta_pagar>=0)?((0,o.wg)(),(0,o.j4)(F,{key:0,label:"Registrar",type:"submit",color:"primary"})):(0,o.kq)("",!0),(0,o.Wm)(F,{label:"Cancelar",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"])])}(0,o.Cn)();var Q=e(8825),I=(e(1082),e(1959)),E=e(9582),F=e(2052);e(8064);const j={setup(){var a=F.Z.firestore();const l=(0,E.tv)(),e=(F.Z.auth().onAuthStateChanged((function(a){a||(alert("you must be logged in to view this. redirecting to the home page"),l.push("/"))})),(0,I.iH)(!0)),t=(0,Q.Z)(),r=(0,I.iH)({in_timestamp:null,placa:null,modelo:null,cor:null,obs:null,n_diarias:0,valor_diaria:0,valor_total:0,valor_pago:0,valor_troco:0,status:"Ok"});let s=null;const c=()=>{s=null,console.log(r.value.placa);const l=a.collection("carros");l.where("placa","==",r.value.placa).where("out_timestamp","==",null).orderBy("in_timestamp","desc").limit(1).get().then((a=>{a.forEach((a=>{s=a.id,console.log(a.id," => ",a.data()),r.value.in_timestamp=d(a.data().in_timestamp),r.value.modelo=a.data().modelo,r.value.cor=a.data().cor,r.value.obs=a.data().obs,r.value.n_diarias=a.data().n_diarias,r.value.valor_diaria=a.data().valor_diaria,r.value.valor_total=a.data().valor_total,r.value.valor_pago=a.data().valor_pago,r.value.valor_troco=a.data().valor_troco,r.value.pago_ate=n(_(+a.data().in_timestamp,+a.data().n_diarias));let l=+new Date;console.log(l),r.value.n_diarias_falta_pagar=parseInt(+(l-_(+a.data().in_timestamp,+a.data().n_diarias))/1e3/86400),r.value.valor_diaria_falta_pagar=r.value.valor_diaria})),s||t.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registro não encontrado!"})})).catch((a=>{console.log("Error getting documents: ",a)}))},d=a=>{const l=new Date(a),e=l.getDate()+"-"+(l.getMonth()+1)+"-"+l.getFullYear(),o=l.getHours()+":"+l.getMinutes()+":"+l.getSeconds(),t=o+" | "+e;return t},n=a=>{const l=new Date(a),e=l.getDate()+"-"+(l.getMonth()+1)+"-"+l.getFullYear(),o=(l.getHours(),l.getMinutes(),l.getSeconds(),e);return o},i=()=>{const a=new Date,l=a.getDate()+"-"+(a.getMonth()+1)+"-"+a.getFullYear(),e=a.getHours()+":"+a.getMinutes()+":"+a.getSeconds(),o=e+"  "+l;r.value.now_timestamp=o};(0,o.m0)((()=>{r.value.valor_total_falta_pagar=r.value.n_diarias_falta_pagar*r.value.valor_diaria_falta_pagar,r.value.valor_troco_falta_pagar=r.value.valor_pago_falta_pagar-r.value.valor_total_falta_pagar}));const u=()=>{r.value={in_timestamp:null,placa:null,modelo:null,cor:null,obs:null,n_diarias:1,valor_diaria:30,valor_total:0,valor_pago:0,valor_troco:0}},_=(a,l)=>{var e=new Date(a);return e.setDate(e.getDate()+l),e},m=async()=>{console.log(s),a.collection("carros").doc(s).update({out_timestamp:+new Date}),u(),console.log("car_searched_id:",s),t.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registro atualizado com sucesso!"})};return setInterval(i,1e3),{carro_encontrado:e,carsearch:c,update:m,car:r,onReset:u}}};var P=e(8689),T=e(4842),Y=e(8240),z=e(7011),B=e(4615),O=e(8886),A=e(7518),L=e.n(A);j.render=H,j.__scopeId="data-v-ae90018a";const G=j;L()(j,"components",{QForm:P.Z,QInput:T.Z,QBtn:Y.Z,QList:z.Z,QExpansionItem:B.Z,QToggle:O.Z})}}]);